# RAG-chat 开发日志

本文档用于记录 RAG-chat 项目的开发过程、已完成工作和待处理任务。

## 项目概述

RAG-chat 是一个基于检索增强生成技术的智能聊天应用，旨在通过结合文档检索和大语言模型能力，提供更准确、更有深度的问答体验。

- **后端**：FastAPI, MongoDB, Milvus
- **前端**：React, TypeScript, TailwindCSS

## 开发时间线

### 2023-11-15 项目初始化
- 创建项目基础结构
- 设置后端 FastAPI 框架
- 配置数据库连接

### 2023-11-20 基础认证实现
- 添加用户注册和登录功能
- 实现 JWT 认证机制
- 创建基本的用户模型

### 2023-12-05 LLM 服务集成
- 添加 LLM 服务接口
- 实现模型配置管理
- 添加模型测试功能

### 2023-12-15 前端基础界面
- 实现登录和注册界面
- 创建聊天界面骨架
- 添加文档管理界面

### 2024-01-10 模型发现功能
- 添加本地模型发现功能
- 实现模型注册流程
- 集成 LMStudio 和 Ollama 支持

### 2024-05-24 项目文档整理
- 移动开发文档到 docs/development 目录
- 将 GitHub 模板移动到 docs/github_templates 目录
- 添加 .dockerignore 配置排除开发文档
- 创建后端环境变量示例文件
- 创建前端环境变量示例文件
- 创建GitHub模板同步脚本 (scripts/sync_github_templates.sh)
- 更新 README.md 添加文档位置说明

## 当前工作状态

### 已完成功能
- 基本用户认证和授权
- LLM 模型配置管理
- 本地模型发现和注册
- 前端基础界面框架

### 进行中工作
- 文档处理和向量化功能
- 聊天历史管理
- 基于 RAG 的检索增强生成

### 已知问题
- `llm.py` 和 `discover.py` 中存在功能重复
- 前端使用模拟数据，尚未连接真实 API
- 调试代码和打印语句需要清理
- 前端缺少组件复用

## 下一步计划
- 重构重复代码
- 完善 RAG 核心功能
- 优化前端组件结构
- 添加单元测试

## 2023-08-19

### 文档整理工作
- 创建了多个文档文件：
  - `DEVLOG.md` - 开发日志记录
  - `TASKS.md` - 任务跟踪
  - `CONTRIBUTING.md` - 贡献指南
  - `WORKFLOW.md` - 工作流程文档
  - `TASK_TEMPLATE.md` - 任务模板

- 创建了GitHub Issue和PR模板

### 优化项目结构
- 将所有文档文件移动到 `docs/development` 目录中
- 创建了 `.gitignore` 和 `.dockerignore` 文件
- 添加了环境变量示例文件
- 创建了GitHub模板同步脚本

## 2023-08-20

### 代码重构
- 合并了 `backend/app/api/v1/endpoints/llm.py` 和 `discover.py` 中重复的 `discover_models` 函数
  - 将主要实现放在 `discover.py` 中
  - 在 `llm.py` 中创建了转发路由
  - 替换了手动调试代码，改用日志记录
  - 添加了单元测试来验证功能
- 更新了状态码使用方式，改用 `status` 常量
- 统一了错误处理方式

### 测试工作
- 为 `discover_models` 和路由转发功能创建了单元测试
- 验证了两个路由都能正常工作

### 下一步计划
- 统一 `register-from-discovery` 和 `register` 端点的功能
- 继续清理调试代码
- 实现统一的错误处理机制

## 2023-08-24

### 测试文件整理
- 整理了项目中分散的测试文件
  - 移除了根目录下的冗余测试文件
  - 确认所有测试文件已正确放置在 `/tests` 目录下
- 创建了详细的测试文档
  - 添加了 `tests/TEST_INFO.md` 文件，详细说明各类测试文件的用途
  - 更新了 `README.md`，添加了测试相关内容
- 改进了测试工具
  - 创建了更灵活的 `run_tests.py` 脚本，支持多种测试运行方式
  - 添加了测试命令示例和最佳实践
- 更新了相关文档
  - 在 `TASKS.md` 中标记测试文件整理任务为已完成
  - 在 `DEVLOG.md` 中添加了测试整理工作的记录

### 下一步计划
- 统一模型注册端点功能
- 实现更多测试用例
- 清理冗余代码和调试语句

## 2023-10-15

### 完成功能

- 统一 `register-from-discovery` 和 `register` 端点的功能
  - 在`LLMService`中添加了统一的`register_discovered_model`方法
  - 更新了两个端点，使其参数和功能保持一致
  - 添加了新的参数：`max_output_tokens`, `temperature`, `custom_options`等
  - 创建了测试用例并确认功能正常
  - 添加了详细文档`backend/docs/ENDPOINT_UNIFICATION.md`
  
### 下一步计划

- 实现前端模型管理界面
- 重构文档处理逻辑

## 2023-10-20

### 完成功能

- 实现前端模型管理界面
  - 创建了Models.tsx页面，用于管理模型
  - 添加了模型列表展示功能
  - 实现了添加、编辑、删除模型的界面
  - 添加了模型发现与注册功能
  - 实现了模型测试功能
  - 在主导航中添加了模型管理入口
  - 使用了组件化设计，提高了代码可维护性

### 下一步计划

- 实现前端与后端API的集成
- 优化模型管理用户体验
- 重构文档处理逻辑 