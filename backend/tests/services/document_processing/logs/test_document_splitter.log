2025-06-14 19:11:06,773 - test_document_splitter - INFO - 
测试配置: {'CHUNK_SIZE': '50', 'CHUNK_OVERLAP': '10', 'SPLIT_BY_PARAGRAPH': 'true', 'SPLIT_BY_SENTENCE': 'true'}
2025-06-14 19:11:06,773 - app.rag.document_splitter - INFO - 初始化文档分割器: 分块大小=1024, 重叠=200
2025-06-14 19:11:06,774 - test_document_splitter - INFO - 生成片段数: 1
2025-06-14 19:11:06,774 - test_document_splitter - INFO - 片段 1 长度: 92 字符
2025-06-14 19:11:06,774 - test_document_splitter - INFO - 内容: 这是一个测试文档。它包含多个句子和段落。
这是第一段的第二句话。这是第三句话。
这是第二段。它也有多个句子。
这是一个较长的句子，包含了更多的信息和细节描述。
这是最后一段。
它很短。

2025-06-14 19:11:06,774 - test_document_splitter - INFO - 
测试配置: {'CHUNK_SIZE': '100', 'CHUNK_OVERLAP': '20', 'SPLIT_BY_PARAGRAPH': 'true', 'SPLIT_BY_SENTENCE': 'false'}
2025-06-14 19:11:06,774 - app.rag.document_splitter - INFO - 初始化文档分割器: 分块大小=1024, 重叠=200
2025-06-14 19:11:06,775 - test_document_splitter - INFO - 生成片段数: 1
2025-06-14 19:11:06,775 - test_document_splitter - INFO - 片段 1 长度: 92 字符
2025-06-14 19:11:06,775 - test_document_splitter - INFO - 内容: 这是一个测试文档。它包含多个句子和段落。
这是第一段的第二句话。这是第三句话。
这是第二段。它也有多个句子。
这是一个较长的句子，包含了更多的信息和细节描述。
这是最后一段。
它很短。

2025-06-14 19:11:06,775 - test_document_splitter - INFO - 
测试配置: {'CHUNK_SIZE': '200', 'CHUNK_OVERLAP': '30', 'SPLIT_BY_PARAGRAPH': 'false', 'SPLIT_BY_SENTENCE': 'true'}
2025-06-14 19:11:06,775 - app.rag.document_splitter - INFO - 初始化文档分割器: 分块大小=1024, 重叠=200
2025-06-14 19:11:06,775 - test_document_splitter - INFO - 生成片段数: 1
2025-06-14 19:11:06,775 - test_document_splitter - INFO - 片段 1 长度: 92 字符
2025-06-14 19:11:06,775 - test_document_splitter - INFO - 内容: 这是一个测试文档。它包含多个句子和段落。
这是第一段的第二句话。这是第三句话。
这是第二段。它也有多个句子。
这是一个较长的句子，包含了更多的信息和细节描述。
这是最后一段。
它很短。

2025-06-14 19:11:06,776 - test_document_splitter - DEBUG - 开始测试父子分割功能
2025-06-14 19:11:06,776 - test_document_splitter - DEBUG - 测试文本长度: 345 字符
2025-06-14 19:11:06,776 - test_document_splitter - DEBUG - 分割规则: {'mode': <SplitMode.PARENT_CHILD: 'parent_child'>, 'max_tokens': 1024, 'chunk_overlap': 200, 'fixed_separator': '\n\n', 'subchunk_max_tokens': 512, 'subchunk_overlap': 50, 'subchunk_separator': '\n', 'clean_text': True, 'keep_separator': False, 'remove_empty_lines': True, 'normalize_whitespace': True}
2025-06-14 19:11:06,776 - app.rag.document_splitter - INFO - 初始化文档分割器: 分块大小=1024, 重叠=200
2025-06-14 19:11:06,776 - test_document_splitter - DEBUG - 开始执行文档分割
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 使用固定分隔符 '

' 分割文本，得到 1 个块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 块长度: [332]
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 332 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 最终生成 1 个块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 使用固定分隔符 '
' 分割文本，得到 17 个块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 块长度: [6, 23, 29, 19, 8, 29, 23, 23, 8, 18, 22, 24, 19, 6, 20, 20, 19]
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 6 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 23 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 29 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 19 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 8 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 29 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 23 的块
2025-06-14 19:11:06,777 - app.rag.text_splitter - DEBUG - 添加长度为 23 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 8 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 18 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 22 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 24 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 19 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 6 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 20 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 20 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 添加长度为 19 的块
2025-06-14 19:11:06,778 - app.rag.text_splitter - DEBUG - 最终生成 17 个块
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - 分割结果统计:
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - 父文档数量: 1
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - 子文档数量: 17
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - 
父文档 1:
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - ID: 9e4257a0-6296-48ff-aee6-216b35eb7660
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - 内容长度: 332 字符
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG - 子文档数量: 17
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -   子文档 1:
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     ID: 87ab87d0-42be-4882-9ca0-eb14d0ff1a1d
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容长度: 6 字符
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容: 第一章：引言...
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -   子文档 2:
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     ID: 8394ed01-f380-40fc-b3b9-79f8fe663727
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容长度: 23 字符
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容: 这是一个较长的文档示例。它包含多个章节和段落。...
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -   子文档 3:
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     ID: 0547bc29-c86d-48d7-b505-007aa80d27e8
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容长度: 29 字符
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容: 这个文档将用于测试父子分割功能。每个章节都可能被分成父块。...
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -   子文档 4:
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     ID: b9cab3f3-3391-4627-b816-80ff088878f0
2025-06-14 19:11:06,778 - test_document_splitter - DEBUG -     内容长度: 19 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 每个父块又可以进一步分割成更小的子块。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 5:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 530b2f77-176c-4e3f-813e-c5c45d039507
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 8 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 第二章：主要内容...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 6:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: e3448179-b2b9-4cd5-a5cb-400196e97360
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 29 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 这一章包含了更多的细节信息。我们将详细讨论父子分割的原理。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 7:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 97121dad-0da1-41b2-bfb1-37177cd74e0e
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 23 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 父块通常是较大的文本单位，比如章节或者大段落。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 8:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 9ab280e7-5559-44f0-b9ba-82050c3d896e
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 23 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 子块则是更小的文本单位，可能是句子或者短段落。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 9:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: cdf130c0-2ae5-4cec-a3ba-72bf48f5a947
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 8 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 第三章：技术实现...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 10:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 47235af4-c5d7-472f-82ce-091ed433a6a6
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 18 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 在实现层面，我们使用了两级分割策略。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 11:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 1dcf7add-778b-454d-9e1f-03dcd6200531
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 22 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 第一级分割会将文档分成较大的块，这些是父块。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 12:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: b5d9e409-8f90-423e-a135-ab8a2d49334d
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 24 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 第二级分割则会将这些父块进一步分割成更小的子块。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 13:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 3b97fcf5-5059-44d8-b669-96ae788b9efe
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容长度: 19 字符
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     内容: 这种方式可以更好地保持文档的层级结构。...
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -   子文档 14:
2025-06-14 19:11:06,779 - test_document_splitter - DEBUG -     ID: 21caf874-3589-41aa-a34c-0ea70ab99479
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容长度: 6 字符
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容: 第四章：总结...
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -   子文档 15:
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     ID: 4a820696-1747-4466-b350-a5a374259bc0
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容长度: 20 字符
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容: 父子分割方法提供了更灵活的文档处理方式。...
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -   子文档 16:
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     ID: 4f9a4255-7698-4a95-a850-620a69ef51a3
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容长度: 20 字符
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容: 它可以同时保持文档的整体结构和局部细节。...
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -   子文档 17:
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     ID: 58719890-0004-49af-8eac-881d171e44e7
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容长度: 19 字符
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG -     内容: 这对于后续的文档分析和处理非常有帮助。...
2025-06-14 19:11:06,780 - test_document_splitter - DEBUG - 分割结果已保存到: /Users/tei/go/RAG-chat/backend/tests/services/document_processing/split_results/test_hierarchical_parent_child_segments.json
2025-06-14 19:11:06,781 - test_document_splitter - DEBUG - 测试完成
2025-06-14 19:11:06,781 - app.rag.document_splitter - INFO - 初始化文档分割器: 分块大小=1024, 重叠=200
2025-06-14 19:11:06,781 - test_document_splitter - INFO - 开始测试文档分割...
2025-06-14 19:11:06,781 - test_document_splitter - INFO - 分割配置: chunk_size=1024, chunk_overlap=200
2025-06-14 19:11:06,781 - test_document_splitter - INFO - 原始文本长度: 141 字符
2025-06-14 19:11:06,781 - test_document_splitter - INFO - 
分割结果: 共生成 1 个片段
2025-06-14 19:11:06,781 - test_document_splitter - INFO - 
片段 1:
2025-06-14 19:11:06,781 - test_document_splitter - INFO - 内容: 第一段落：这是第一段文字。这里包含了一些基本信息。这是第一段的最后一句。
第二段落：这是第二段的开始。这里有一些技术细节的描述。
这是第二段的第二行。这里继续描述一些内容。
第三段落：这是最后一段。这段包含总结信息。
这是最后一段的第二行。这里是文档的结束。
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 长度: 129 字符
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 元数据: {'source': 'test_document', 'type': 'parent', 'index': 1, 'original_doc_id': 'test_doc_id_1', 'doc_hash': '445282dd2a437d86a6b905d3756b69810421af955abf014b90eee8d4ac0d652c'}
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 
统计信息:
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 总字符数: 129
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 平均片段长度: 129.00 字符
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 最短片段长度: 129 字符
2025-06-14 19:11:06,782 - test_document_splitter - INFO - 最长片段长度: 129 字符
