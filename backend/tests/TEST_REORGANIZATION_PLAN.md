# æµ‹è¯•é‡ç»„è®¡åˆ’

## å½“å‰æµ‹è¯•æ–‡ä»¶åˆ†æ

### ğŸ” å‘ç°çš„é—®é¢˜
1. **é‡å¤æµ‹è¯•æ–‡ä»¶**: å¤šä¸ªåŠŸèƒ½ç›¸ä¼¼çš„æµ‹è¯•è„šæœ¬
2. **åˆ†æ•£çš„æµ‹è¯•**: åŒç±»æµ‹è¯•åˆ†å¸ƒåœ¨ä¸åŒç›®å½•
3. **å‘½åä¸è§„èŒƒ**: æµ‹è¯•æ–‡ä»¶å‘½åä¸ä¸€è‡´
4. **ç¼ºå°‘æµ‹è¯•æ•°æ®ç®¡ç†**: æµ‹è¯•æ•°æ®åˆ†æ•£

### ğŸ“Š æµ‹è¯•æ–‡ä»¶åˆ†ç±»

#### 1. æ–‡æ¡£åˆ†å‰²ç›¸å…³æµ‹è¯• (é‡å¤åº¦é«˜)
**éœ€è¦åˆå¹¶çš„æ–‡ä»¶:**
- `integration/test_document_split_fix.py` - æ–‡æ¡£åˆ†å‰²ä¿®å¤æµ‹è¯•
- `integration/test_document_split_consistency.py` - åˆ†å‰²ä¸€è‡´æ€§æµ‹è¯•
- `integration/test_splitter_fix.py` - åˆ†å‰²å™¨ä¿®å¤æµ‹è¯•
- `integration/test_splitter_debug.py` - åˆ†å‰²å™¨è°ƒè¯•æµ‹è¯•
- `services/document_processing/test_document_splitter.py` - æ–‡æ¡£åˆ†å‰²å™¨å•å…ƒæµ‹è¯•

**åˆå¹¶ç›®æ ‡:** `tests/unit/test_document_splitter.py` + `tests/integration/test_document_processing.py`

#### 2. APIç«¯ç‚¹æµ‹è¯• (é‡å¤åº¦ä¸­)
**éœ€è¦åˆå¹¶çš„æ–‡ä»¶:**
- `integration/test_api_fix.py` - APIä¿®å¤æµ‹è¯•
- `integration/test_simple_api.py` - ç®€å•APIæµ‹è¯•
- `api/test_llm_api.py` - LLM APIæµ‹è¯•
- `test_llm_endpoints.py` - LLMç«¯ç‚¹æµ‹è¯•

**åˆå¹¶ç›®æ ‡:** `tests/integration/test_api_endpoints.py`

#### 3. æ¨¡å‹å‘ç°æµ‹è¯• (é‡å¤åº¦é«˜)
**éœ€è¦åˆå¹¶çš„æ–‡ä»¶:**
- `test_discover.py` - å‘ç°æ¥å£æµ‹è¯•
- `test_discover_endpoints.py` - å‘ç°ç«¯ç‚¹æµ‹è¯•
- `discover/test_api.py` - å‘ç°APIæµ‹è¯•
- `discover/test_service.py` - å‘ç°æœåŠ¡æµ‹è¯•
- `discover/test_discover_client.py` - å‘ç°å®¢æˆ·ç«¯æµ‹è¯•

**åˆå¹¶ç›®æ ‡:** `tests/unit/test_llm_discovery.py` + `tests/integration/test_discovery_api.py`

#### 4. éªŒè¯å’Œä¿®å¤æµ‹è¯• (åŠŸèƒ½é‡å¤)
**éœ€è¦æ•´ç†çš„æ–‡ä»¶:**
- `integration/verify_fix.py` - ä¿®å¤éªŒè¯
- `integration/final_test_verification.py` - æœ€ç»ˆéªŒè¯æµ‹è¯•
- `integration/test_pdf_detailed.py` - PDFè¯¦ç»†æµ‹è¯•

**å¤„ç†æ–¹æ¡ˆ:** ä¿ç•™æ ¸å¿ƒåŠŸèƒ½ï¼Œç§»é™¤é‡å¤éªŒè¯

### ğŸ¯ é‡ç»„ç›®æ ‡ç»“æ„

```
tests/
â”œâ”€â”€ unit/                           # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_document_processor.py  # æ–‡æ¡£å¤„ç†å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_document_splitter.py   # æ–‡æ¡£åˆ†å‰²å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_llm_discovery.py       # LLMå‘ç°åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_embedding_model.py     # åµŒå…¥æ¨¡å‹æµ‹è¯•
â”‚   â””â”€â”€ test_user_service.py        # ç”¨æˆ·æœåŠ¡æµ‹è¯•
â”œâ”€â”€ integration/                    # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_api_endpoints.py       # APIç«¯ç‚¹é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_document_processing.py # æ–‡æ¡£å¤„ç†é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_discovery_api.py       # å‘ç°APIé›†æˆæµ‹è¯•
â”‚   â””â”€â”€ test_rag_workflow.py        # RAGå·¥ä½œæµæµ‹è¯•
â”œâ”€â”€ fixtures/                       # æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ documents/                  # æµ‹è¯•æ–‡æ¡£
â”‚   â”œâ”€â”€ responses/                  # æ¨¡æ‹Ÿå“åº”
â”‚   â””â”€â”€ configs/                    # æµ‹è¯•é…ç½®
â”œâ”€â”€ utils/                          # æµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ test_helpers.py             # æµ‹è¯•è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ mock_services.py            # æ¨¡æ‹ŸæœåŠ¡
â”‚   â””â”€â”€ data_generators.py          # æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
â””â”€â”€ conftest.py                     # pytesté…ç½®
```

### ğŸ“‹ æ‰§è¡Œè®¡åˆ’

#### é˜¶æ®µ1: åˆ›å»ºæ–°çš„æµ‹è¯•ç»“æ„
1. åˆ›å»ºæ ‡å‡†åŒ–çš„æµ‹è¯•ç›®å½•ç»“æ„
2. åˆ›å»ºæµ‹è¯•å·¥å…·å’Œè¾…åŠ©å‡½æ•°
3. å»ºç«‹æµ‹è¯•æ•°æ®ç®¡ç†

#### é˜¶æ®µ2: åˆå¹¶é‡å¤æµ‹è¯•
1. åˆå¹¶æ–‡æ¡£åˆ†å‰²ç›¸å…³æµ‹è¯•
2. åˆå¹¶APIç«¯ç‚¹æµ‹è¯•
3. åˆå¹¶æ¨¡å‹å‘ç°æµ‹è¯•

#### é˜¶æ®µ3: ä¼˜åŒ–æµ‹è¯•è´¨é‡
1. ç»Ÿä¸€æµ‹è¯•å‘½åè§„èŒƒ
2. æ·»åŠ æµ‹è¯•æ–‡æ¡£å’Œæ³¨é‡Š
3. æé«˜æµ‹è¯•è¦†ç›–ç‡

#### é˜¶æ®µ4: æ¸…ç†å’ŒéªŒè¯
1. åˆ é™¤é‡å¤çš„æµ‹è¯•æ–‡ä»¶
2. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶éªŒè¯
3. æ›´æ–°æµ‹è¯•æ–‡æ¡£

### ğŸ”§ æµ‹è¯•æ ‡å‡†

#### å‘½åè§„èŒƒ
- å•å…ƒæµ‹è¯•: `test_<module_name>.py`
- é›†æˆæµ‹è¯•: `test_<feature_name>_integration.py`
- æµ‹è¯•å‡½æ•°: `test_should_<expected_behavior>_when_<condition>()`

#### æµ‹è¯•ç»“æ„
```python
class TestDocumentSplitter:
    """æ–‡æ¡£åˆ†å‰²å™¨æµ‹è¯•ç±»"""
    
    def setup_method(self):
        """æ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰çš„å‡†å¤‡"""
        pass
    
    def test_should_split_document_when_valid_input_provided(self):
        """æµ‹è¯•ï¼šæä¾›æœ‰æ•ˆè¾“å…¥æ—¶åº”æ­£ç¡®åˆ†å‰²æ–‡æ¡£"""
        # Arrange
        # Act  
        # Assert
        pass
```

#### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡: 90%+
- é›†æˆæµ‹è¯•è¦†ç›–ç‡: 80%+
- å…³é”®ä¸šåŠ¡é€»è¾‘: 95%+

### ğŸ“ˆ é¢„æœŸæ•ˆæœ

#### æ•°é‡ä¼˜åŒ–
- æµ‹è¯•æ–‡ä»¶æ•°é‡: 70+ â†’ 30-
- é‡å¤æµ‹è¯•: 15+ â†’ 0
- æµ‹è¯•ä»£ç è¡Œæ•°: å‡å°‘40%

#### è´¨é‡æå‡
- æµ‹è¯•å¯ç»´æŠ¤æ€§æå‡
- æµ‹è¯•æ‰§è¡Œé€Ÿåº¦æå‡
- æµ‹è¯•è¦†ç›–ç‡æå‡
- æµ‹è¯•æ–‡æ¡£å®Œå–„

### âš ï¸ é£é™©æ§åˆ¶

#### å¤‡ä»½ç­–ç•¥
- ç§»åŠ¨æ–‡ä»¶å‰å…ˆå¤‡ä»½åˆ°temp/tests-backup/
- ä¿ç•™åŸå§‹æµ‹è¯•æ–‡ä»¶ç›´åˆ°æ–°æµ‹è¯•éªŒè¯é€šè¿‡

#### éªŒè¯ç­–ç•¥
- æ¯ä¸ªé˜¶æ®µå®Œæˆåè¿è¡Œæµ‹è¯•å¥—ä»¶
- ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ä¸é™ä½
- éªŒè¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹éƒ½è¢«ä¿ç•™
